<!DOCTYPE html>
<meta charset="utf-8">

<body style="background:#ccc;">
    <script src="./js/d3.js"></script>
    <script src="./js/viz.js" type="javascript/worker"></script>
    <script src="./js/d3-graphviz.js"></script>
    <div>
        <h4>日志图</h4>
        <div id="btn">展示全部节点</div>
        <div id="graph" style="text-align: center;width:800px;height:800px;"></div>
    </div>
    <script>
        var data = {
            "data": {
                "nodes": [{
                    "id": "aas_total",
                    "name": "aas_total",
                    "location_type": "DB",
                    "monitor_object": "AAS_TOTAL",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "threshold",
                        "upper": 200
                    },
                    "uid": "aas_totalby18pardbdb1001",
                    "event_id": "aas_total",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0.06,
                    "severity": 1,
                    "report": {},
                    "status": "abnormal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "enq: TX - index contention",
                    "name": "enq: TX - index contention",
                    "location_type": "DB",
                    "monitor_object": "enq: TX - index contention",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "enq: TX - index contentionby18pardbdb1001",
                    "event_id": "enq: TX - index contention",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0,
                    "severity": 0,
                    "report": {},
                    "status": "normal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "index contention sql",
                    "name": "index contention sql",
                    "location_type": "DB",
                    "monitor_object": "index_contention_sql",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "fluxrank"
                    },
                    "uid": "index contention sqlby18pardbdb1001",
                    "event_id": "index contention sql",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": -1,
                    "severity": -1,
                    "report": {},
                    "status": "not detected",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "index contention obj",
                    "name": "index contention obj",
                    "location_type": "DB",
                    "monitor_object": "index_contention_obj",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "fluxrank"
                    },
                    "uid": "index contention objby18pardbdb1001",
                    "event_id": "index contention obj",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": -1,
                    "severity": -1,
                    "report": {},
                    "status": "not detected",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "aas_total",
                    "name": "aas_total",
                    "location_type": "DB",
                    "monitor_object": "AAS_TOTAL",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "threshold",
                        "upper": 200
                    },
                    "uid": "aas_totalby18pardbdb1002",
                    "event_id": "aas_total",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0,
                    "severity": 0,
                    "report": {},
                    "status": "normal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "enq: TX - index contention",
                    "name": "enq: TX - index contention",
                    "location_type": "DB",
                    "monitor_object": "enq: TX - index contention",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "enq: TX - index contentionby18pardbdb1002",
                    "event_id": "enq: TX - index contention",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 1.0,
                    "severity": 1,
                    "report": {},
                    "status": "abnormal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "index contention sql",
                    "name": "index contention sql",
                    "location_type": "DB",
                    "monitor_object": "index_contention_sql",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "fluxrank"
                    },
                    "uid": "index contention sqlby18pardbdb1002",
                    "event_id": "index contention sql",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": -1,
                    "severity": -1,
                    "report": {},
                    "status": "not detected",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "index contention obj",
                    "name": "index contention obj",
                    "location_type": "DB",
                    "monitor_object": "index_contention_obj",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "fluxrank"
                    },
                    "uid": "index contention objby18pardbdb1002",
                    "event_id": "index contention obj",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": -1,
                    "severity": -1,
                    "report": {},
                    "status": "not detected",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "enq: TX - row lock contention",
                    "name": "enq: TX - row lock contention",
                    "location_type": "DB",
                    "monitor_object": "enq: TX - row lock contention",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "enq: TX - row lock contentionby18pardbdb1002",
                    "event_id": "enq: TX - row lock contention",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0,
                    "severity": 0,
                    "report": {},
                    "status": "normal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "CPU",
                    "name": "CPU",
                    "location_type": "DB",
                    "monitor_object": "CPU",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "CPUby18pardbdb1002",
                    "event_id": "CPU",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0,
                    "severity": 0,
                    "report": {},
                    "status": "normal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "log file sync",
                    "name": "log file sync",
                    "location_type": "DB",
                    "monitor_object": "log file sync",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "log file syncby18pardbdb1002",
                    "event_id": "log file sync",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 190.0,
                    "severity": 1,
                    "report": {},
                    "status": "abnormal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "log file parallel write",
                    "name": "log file parallel write",
                    "location_type": "DB",
                    "monitor_object": "parallel write",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "log file parallel writeby18pardbdb1002",
                    "event_id": "log file parallel write",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 37.0,
                    "severity": 1,
                    "report": {},
                    "status": "abnormal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "row cache lock",
                    "name": "row cache lock",
                    "location_type": "DB",
                    "monitor_object": "row cache lock",
                    "location_id": "by18pardbdb1002",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "row cache lockby18pardbdb1002",
                    "event_id": "row cache lock",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": -1,
                    "severity": -1,
                    "report": {},
                    "status": "not detected",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "enq: TX - row lock contention",
                    "name": "enq: TX - row lock contention",
                    "location_type": "DB",
                    "monitor_object": "enq: TX - row lock contention",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "enq: TX - row lock contentionby18pardbdb1001",
                    "event_id": "enq: TX - row lock contention",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0,
                    "severity": 0,
                    "report": {},
                    "status": "normal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "CPU",
                    "name": "CPU",
                    "location_type": "DB",
                    "monitor_object": "CPU",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "CPUby18pardbdb1001",
                    "event_id": "CPU",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0,
                    "severity": 0,
                    "report": {},
                    "status": "normal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "log file sync",
                    "name": "log file sync",
                    "location_type": "DB",
                    "monitor_object": "log file sync",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "log file syncby18pardbdb1001",
                    "event_id": "log file sync",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 3732.3333333333335,
                    "severity": 3,
                    "report": {},
                    "status": "abnormal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "log file parallel write",
                    "name": "log file parallel write",
                    "location_type": "DB",
                    "monitor_object": "parallel write",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "log file parallel writeby18pardbdb1001",
                    "event_id": "log file parallel write",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 49.0,
                    "severity": 2,
                    "report": {},
                    "status": "abnormal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }, {
                    "id": "row cache lock",
                    "name": "row cache lock",
                    "location_type": "DB",
                    "monitor_object": "row cache lock",
                    "location_id": "by18pardbdb1001",
                    "strategy": {
                        "method": "anomaly"
                    },
                    "uid": "row cache lockby18pardbdb1001",
                    "event_id": "row cache lock",
                    "start_time": "2019-12-10T21:30:00+08:00",
                    "last_time": "",
                    "description": "",
                    "ranking_score": 0,
                    "severity": 0,
                    "report": {},
                    "status": "normal",
                    "end_time": "2019-12-10T21:50:00+08:00"
                }],
                "edges": [{
                    "id": "rule1",
                    "name": "rule1",
                    "reason_event_id": "enq: TX - index contention",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "997c41c2-e50f-4297-b1a4-9bf8509401d8",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "enq: TX - index contentionby18pardbdb1001",
                    "result_instance_uid": "aas_totalby18pardbdb1001"
                }, {
                    "id": "rule2",
                    "name": "rule2",
                    "reason_event_id": "index contention sql",
                    "result_event_id": "enq: TX - index contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "f4bcbd15-fc6d-4c82-8751-7650ea36d7d6",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "index contention sqlby18pardbdb1001",
                    "result_instance_uid": "enq: TX - index contentionby18pardbdb1001"
                }, {
                    "id": "rule3",
                    "name": "rule3",
                    "reason_event_id": "index contention obj",
                    "result_event_id": "enq: TX - index contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "81553890-c9b9-4d3b-a2dc-07b8002a0ab6",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "index contention objby18pardbdb1001",
                    "result_instance_uid": "enq: TX - index contentionby18pardbdb1001"
                }, {
                    "id": "rule4",
                    "name": "rule4",
                    "reason_event_id": "aas_total",
                    "result_event_id": "enq: TX - index contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "21ed0572-24f6-4e57-88be-bb37f7ecf5a3",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "aas_totalby18pardbdb1002",
                    "result_instance_uid": "enq: TX - index contentionby18pardbdb1001"
                }, {
                    "id": "rule1",
                    "name": "rule1",
                    "reason_event_id": "enq: TX - index contention",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "f61aba5e-37d8-46e8-a108-580b87acc77e",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "enq: TX - index contentionby18pardbdb1002",
                    "result_instance_uid": "aas_totalby18pardbdb1002"
                }, {
                    "id": "rule2",
                    "name": "rule2",
                    "reason_event_id": "index contention sql",
                    "result_event_id": "enq: TX - index contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "2da2eb9f-a651-46ad-a3e4-272f8ab0428a",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "index contention sqlby18pardbdb1002",
                    "result_instance_uid": "enq: TX - index contentionby18pardbdb1002"
                }, {
                    "id": "rule3",
                    "name": "rule3",
                    "reason_event_id": "index contention obj",
                    "result_event_id": "enq: TX - index contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "4b22b4a7-9259-4005-897d-3d03243a562f",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "index contention objby18pardbdb1002",
                    "result_instance_uid": "enq: TX - index contentionby18pardbdb1002"
                }, {
                    "id": "rule6",
                    "name": "rule6",
                    "reason_event_id": "enq: TX - row lock contention",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "6d8d5cc8-19a6-448c-84df-e31f1cbd6209",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "enq: TX - row lock contentionby18pardbdb1002",
                    "result_instance_uid": "aas_totalby18pardbdb1002"
                }, {
                    "id": "rule7",
                    "name": "rule7",
                    "reason_event_id": "CPU",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "de895c26-8efe-43fd-a86c-792d9bbeef1e",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "CPUby18pardbdb1002",
                    "result_instance_uid": "aas_totalby18pardbdb1002"
                }, {
                    "id": "rule8",
                    "name": "rule8",
                    "reason_event_id": "log file sync",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "5f8dc137-73fd-4c2f-9aa4-6af3f235226c",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "log file syncby18pardbdb1002",
                    "result_instance_uid": "aas_totalby18pardbdb1002"
                }, {
                    "id": "rule16",
                    "name": "rule16",
                    "reason_event_id": "log file parallel write",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "06c7cd55-fb60-4797-9676-a586ca0ecaa5",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "log file parallel writeby18pardbdb1002",
                    "result_instance_uid": "aas_totalby18pardbdb1002"
                }, {
                    "id": "rule17",
                    "name": "rule17",
                    "reason_event_id": "row cache lock",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "f74f70ec-be48-44ed-ae5f-c8c8d74bd820",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "row cache lockby18pardbdb1002",
                    "result_instance_uid": "aas_totalby18pardbdb1002"
                }, {
                    "id": "rule5",
                    "name": "rule5",
                    "reason_event_id": "enq: TX - index contention",
                    "result_event_id": "enq: TX - index contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "3fa18ee7-03b8-4b26-92a0-276dd666396f",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "enq: TX - index contentionby18pardbdb1002",
                    "result_instance_uid": "enq: TX - index contentionby18pardbdb1001"
                }, {
                    "id": "rule6",
                    "name": "rule6",
                    "reason_event_id": "enq: TX - row lock contention",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "cc962074-4ba3-4e8d-b84d-661f8cfad180",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "enq: TX - row lock contentionby18pardbdb1001",
                    "result_instance_uid": "aas_totalby18pardbdb1001"
                }, {
                    "id": "rule9",
                    "name": "rule9",
                    "reason_event_id": "aas_total",
                    "result_event_id": "enq: TX - row lock contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "4afdd44e-20e3-4138-993f-8cc26738f4eb",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "aas_totalby18pardbdb1002",
                    "result_instance_uid": "enq: TX - row lock contentionby18pardbdb1001"
                }, {
                    "id": "rule10",
                    "name": "rule10",
                    "reason_event_id": "enq: TX - row lock contention",
                    "result_event_id": "enq: TX - row lock contention",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "ebe5421d-6aca-4377-bc44-c3cb51be065e",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "enq: TX - row lock contentionby18pardbdb1002",
                    "result_instance_uid": "enq: TX - row lock contentionby18pardbdb1001"
                }, {
                    "id": "rule7",
                    "name": "rule7",
                    "reason_event_id": "CPU",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "b8f27813-70f9-4262-aac3-679330643ab8",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "CPUby18pardbdb1001",
                    "result_instance_uid": "aas_totalby18pardbdb1001"
                }, {
                    "id": "rule11",
                    "name": "rule11",
                    "reason_event_id": "aas_total",
                    "result_event_id": "CPU",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "66dd7f1d-c332-4b60-8d62-6e5551ed82a5",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "aas_totalby18pardbdb1002",
                    "result_instance_uid": "CPUby18pardbdb1001"
                }, {
                    "id": "rule12",
                    "name": "rule12",
                    "reason_event_id": "CPU",
                    "result_event_id": "CPU",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "ffb08916-22aa-429b-ac35-1940c5e2fc77",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "CPUby18pardbdb1002",
                    "result_instance_uid": "CPUby18pardbdb1001"
                }, {
                    "id": "rule8",
                    "name": "rule8",
                    "reason_event_id": "log file sync",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "65817d19-6984-4742-991b-c711a3666653",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "log file syncby18pardbdb1001",
                    "result_instance_uid": "aas_totalby18pardbdb1001"
                }, {
                    "id": "rule13",
                    "name": "rule13",
                    "reason_event_id": "aas_total",
                    "result_event_id": "log file sync",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "abe44efc-a34d-4d7f-b9d8-e47d54d3864d",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "aas_totalby18pardbdb1002",
                    "result_instance_uid": "log file syncby18pardbdb1001"
                }, {
                    "id": "rule14",
                    "name": "rule14",
                    "reason_event_id": "log file sync",
                    "result_event_id": "log file sync",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "bf82d3bb-79cb-49b7-afce-ebdd18324885",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "log file syncby18pardbdb1002",
                    "result_instance_uid": "log file syncby18pardbdb1001"
                }, {
                    "id": "rule15",
                    "name": "rule15",
                    "reason_event_id": "log file parallel write",
                    "result_event_id": "log file sync",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "\u90e8\u7f72\u5355\u5143",
                    "weight": 50,
                    "uid": "bdfdc0f1-42db-4275-8618-9f52eaa5d982",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "log file parallel writeby18pardbdb1002",
                    "result_instance_uid": "log file syncby18pardbdb1001"
                }, {
                    "id": "rule16",
                    "name": "rule16",
                    "reason_event_id": "log file parallel write",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "037d2fd0-cb4f-433a-b351-c1f499450e48",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "log file parallel writeby18pardbdb1001",
                    "result_instance_uid": "aas_totalby18pardbdb1001"
                }, {
                    "id": "rule17",
                    "name": "rule17",
                    "reason_event_id": "row cache lock",
                    "result_event_id": "aas_total",
                    "temporal_relation": [600000, 600000],
                    "spatial_relation": "same_location",
                    "weight": 50,
                    "uid": "2fb39b36-1f0c-40c2-be45-cb57256098fb",
                    "reason_instance": null,
                    "result_instance": null,
                    "reason_instance_uid": "row cache lockby18pardbdb1001",
                    "result_instance_uid": "aas_totalby18pardbdb1001"
                }]
            },
            "info": {}
        }
        var showAll = true;    // 显示全部
        var data1 = data
        let nodes = data1.data.nodes
        let edges = data1.data.edges
        /** 展示全部节点 */
        let nodesList1 = nodes.map(item => {
            if (item.status === 'abnormal') {
                return `"${item.uid}" [id="${item.uid}" label="${item.name}&#10;(${item.location_type})&#10;${item.location_id}" shape="record" color="#ff2d51" fillcolor="#ff2d51" children="${item.severity}"]`
            } else if (item.status === 'normal') {
                return `"${item.uid}" [id="${item.uid}" label="${item.name}&#10;(${item.location_type})&#10;${item.location_id}" shape="record" color="#f0fcff" fillcolor="#70f3ff" children="${item.severity}"]`
            } else {
                return `"${item.uid}" [id="${item.uid}" label="${item.name}&#10;(${item.location_type})&#10;${item.location_id}" shape="record" color="#f0c239" fillcolor="#c2ccd0" children="${item.severity}"]`
            }
        })

        // console.log(abnormalList, 'abnormalList')
        // let nodesContent = abnormalList.join(' ')
        let nodesContent1 = nodesList1.join(' ')
        let edgesList1 = edges.map(item => {
            return `"${item.result_instance_uid}" -> "${item.reason_instance_uid}" [id="${item.uid}"]`
        })
        let edgesContent1 = edgesList1.join(' ')
        // console.log(edgesList, 'edgesList')
        // console.log(edgesContent, 'edgesContent')
        // console.log(nodesContent, 'nodeContent')
        // console.log(nodesList, 'nodeList')

        /** 仅展示异常节点 */
        let abnormalList = nodes.filter(item => {
            return item.status === 'abnormal'
        })
        let nodesList = abnormalList.map(item => {
            if (item.status === 'abnormal') {
                return `"${item.uid}" [id="${item.uid}" label="${item.name}&#10;(${item.location_type})" shape="record" color="#ff2d51" fillcolor="#ff2d51" children="${item.severity}"]`
            } else if (item.status === 'normal') {
                return `"${item.uid}" [id="${item.uid}" label="${item.name}&#10;(${item.location_type})" shape="record" color="#f0fcff" fillcolor="#70f3ff" children="${item.severity}"]`
            } else {
                return `"${item.uid}" [id="${item.uid}" label="${item.name}&#10;(${item.location_type})" shape="record" color="#f0c239" fillcolor="#f0c239" children="${item.severity}"]`
            }
        })
        let nodesContent = nodesList.join(' ')
        let arr = []
        for (let i = 0; i < abnormalList.length; i++) {
            for (let s = 0; s < edges.length; s++) {
                if (edges[s].reason_instance_uid === abnormalList[i].uid) {
                    console.log(edges[s], 'hah')
                    arr.push(edges[s])
                }
            }
        }
        // console.log(arr, 'ara')
        let arr1 = []
        for (let i = 0; i < arr.length; i++) {
            for (let s = 0; s < abnormalList.length; s++) {
                if (arr[i].result_instance_uid === abnormalList[s].uid) {
                    arr1.push(arr)
                }
            }
        }
        let arrContent = arr
        let edgesList = arrContent.map(item => {
            return `"${item.reason_instance_uid}" -> "${item.result_instance_uid}" [id="${item.uid}" label="${item.name}"]`
        })
        let edgesContent = edgesList.join(' ')
        var dotSrc = `
digraph {
    graph [label="Click on a node or an edge to open it" labelloc="t", fontsize="20.0" tooltip=" "]
    node [style="filled"]
    ${nodesContent1}
    ${edgesContent1}
}
`;
        var dotSrcAbnormal = `
digraph {
    graph [label="Click on a node or an edge to open it" labelloc="t", fontsize="20.0" tooltip=" "]
    node [style="filled"]
    ${nodesContent}
    ${edgesContent}
}
`;
        var dotSrcLines;

        var graphviz = d3.select("#graph").graphviz();

        function render(renderObj) {
            console.log('DOT source =', renderObj);
            if (showAll)
                dotSrcLines = renderObj.split('\n');
            else
                dotSrcLines = renderObj
            graphviz
                .tweenPaths(false)
                .tweenShapes(false)
                // .dot(renderObj)
                .transition(function () {
                    return d3.transition()
                        .delay(100)
                        .duration(1000);
                })
                .renderDot(renderObj)
                .on("end", interactive);
        }

        function interactive() {

            nodes = d3.selectAll('.node,.edge');
            nodes
                .on("click", function () {
                    var title = d3.select(this).selectAll('title').text().trim();
                    var text = d3.select(this).selectAll('text').text();
                    var id = d3.select(this).attr('id');
                    var class1 = d3.select(this).attr('class');
                    // dotElement = title.replace('->', ' -> ');
                    console.log('text', text)
                    // window.alert(`我是图表${id}`)
                    // console.log('Element id="%s" class="%s" title="%s" text="%s" dotElement="%s"', id, class1,
                    //     title, text, dotElement);
                    // console.log('Finding and deleting references to %s "%s" from the DOT source', class1,
                    //     dotElement);
                    if (!showAll) {
                        render(dotSrc);
                    } else {
                        render(dotSrcAbnormal);
                    }
                });
        }
        btn = document.getElementById('btn');
        canClick = true;
        btn.addEventListener('click', function () {
            if (canClick) {
                canClick = false;
                if (showAll) {
                    render(dotSrc);
                    setTimeout(() => { btn.textContent = "仅展示异常节点"; canClick = true}, 1000)
                } else {
                    render(dotSrcAbnormal);
                    setTimeout(() => { btn.textContent = "展示全部节点", canClick = true}, 1000)
                }
            }
            showAll=!showAll
        })
        // render(dotSrc);

    </script>
    <style>
        .node {
            white-space: pre;
        }
    </style>